<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<title>TG_@Cricinsider365</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.1/shaka-player.ui.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.1/controls.min.css" crossorigin="anonymous">
<style>
    img {
        position: relative;
        right: 130;
        bottom: 10;
        margin: auto auto;
        max-width: 20%;
        max-height: 20%;
        object-fit: contain;
        pointer-events: none
    }

    .shaka-spinner-container {
        display: none
    }

    .uc {
        pointer-events: none
    }

    body {
        background-color: #000;
    }
</style>
</head>

<body bgcolor='white' style='margin:0'>
    <body bgcolor="black" style="margin: 0;">
        <div data-shaka-player-container style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
            <video autoplay muted data-shaka-player id="video" poster="https://cxh.pages.dev/L.jpg" style="width:100%;height:100%"></video>
        </div>
        <script>
    async function init() {
        // Extract the 'id' parameter from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const streamId = urlParams.get('id'); // Extract 'id' parameter from URL
        console.log("Stream ID:", streamId);

        const video = document.getElementById("video");
        const ui = video.ui;
        const controls = ui.getControls();
        const player = controls.getPlayer();

        const keysConfig = {
            'e31a5a81caff5d07ea2411a571fc2e59': { key: "96c5ef69479732ae734f962748c19729", slot: "slot1" },
            'key1id': { key: "key1value", slot: "slot2" },
            'key2id': { key: "key2value", slot: "slot3" },
            'key3id': { key: "key3value", slot: "slot4" },
            'key4id': { key: "key4value", slot: "slot5" },
            'key5id': { key: "key5value", slot: "slot6" },
            'key6id': { key: "key6value", slot: "slot7" },
            'key7id': { key: "key7value", slot: "slot8" },
            'key8id': { key: "key8value", slot: "slot9" },
            'key9id': { key: "key9value", slot: "slot10" },
            'key10id': { key: "key10value", slot: "slot11" }
        };

        const clearKeys = {};
        Object.keys(keysConfig).forEach(keyID => {
            clearKeys[keyID] = keysConfig[keyID].key;
        });

        player.configure({
            drm: { clearKeys }
        });

        ui.configure({
            controlPanelElements: ["play_pause", "mute", "volume", "spacer", "time_and_duration", "quality", "fullscreen", "overflow_menu"],
            volumeBarColors: {
                base: "rgba(0, 0, 255, 1)", // Blue base color for the volume bar
                level: "rgb(0, 255, 0)"     // Green color for the volume level
            },
            seekBarColors: {
                base: "rgb(255, 0, 0)",       // Red base color for the seek bar
                buffered: "rgb(255, 255, 0)", // Yellow color for the buffered portion
                played: "rgba(0, 128, 128, 1)" // Teal color for the played portion
            }
        });

        // Define individual MPDs with their unique streamId
        const mpdUrls = [
            { streamId: "url1", url: "https://live.ll.ww.aiv-cdn.net/OTTB/lhr-nitro/live/clients/dash/enc/i2pcjr4pe5/out/v1/912e9db56d75403b8a9ac0a719110f36/cenc.mpd" },
            { streamId: "url2", url: "https://example.com/mpd2.mpd" },
            { streamId: "url3", url: "https://example.com/mpd3.mpd" },
            { streamId: "url4", url: "https://example.com/mpd4.mpd" },
            { streamId: "url5", url: "https://example.com/mpd5.mpd" },
            { streamId: "url6", url: "https://example.com/mpd6.mpd" },
            { streamId: "url7", url: "https://example.com/mpd7.mpd" },
            { streamId: "url8", url: "https://example.com/mpd8.mpd" },
            { streamId: "url9", url: "https://example.com/mpd9.mpd" },
            { streamId: "url10", url: "https://example.com/mpd10.mpd" }
        ];

        // Find the MPD with the corresponding streamId
        const selectedMpd = mpdUrls.find(mpd => mpd.streamId === streamId);

        window.player = player;
        window.ui = ui;

        try {
            if (selectedMpd) {
                console.log(`Loading MPD for stream ID: ${streamId}`);
                await player.load(selectedMpd.url);
                console.log("Stream loaded successfully!");
            } else {
                console.error("Stream ID not found or invalid.");
            }
        } catch (error) {
            console.error("Error loading stream:", error);
        }
    }

    document.addEventListener("shaka-ui-loaded", init);
    document.addEventListener("shaka-ui-load-failed", () => console.error("Unable to load the UI library!"));
</script>