<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DRM MPD Stream with Keys</title>
  <link rel="stylesheet" href="https://cxh.pages.dev/style.css">
</head>
<body>

<!-- Video Player -->
<div id="player"></div>
<script src="https://cdn.jwplayer.com/libraries/KB5zFt7A.js"></script>

<script>
  // Video stream configurations with ClearKey DRM
  const videoConfigs = {
    "1": {
      url: "https://example.com/path/to/your/drm-protected.mpd", // MPD file URL
      drm: {
        clearkey: {
          keys: {
            // Provide Key ID and Key as a JSON object
            "12345678123456781234567812345678": "abcdefabcdefabcdefabcdefabcdefab",
          },
        },
      },
    },
    "2": {
      url: "https://example.com/path/to/another/drm-protected.mpd",
      drm: {
        clearkey: {
          keys: {
            "87654321876543218765432187654321": "fedcbafedcbafedcbafedcbafedcbafe",
          },
        },
      },
    },
  };

  // Get the query parameter 'id' from the URL
  const urlParams = new URLSearchParams(window.location.search);
  const streamId = urlParams.get('id');

  // Check if the 'id' parameter exists and is valid
  const videoConfig = videoConfigs[streamId];

  if (videoConfig) {
    // Initialize JW Player with the selected DRM stream
    jwplayer("player").setup({
      file: videoConfig.url, // MPD file URL
      width: "100%",
      height: "100%",
      autostart: true,
      controls: true,
      drm: {
        clearkey: {
          keyids: Object.keys(videoConfig.drm.clearkey.keys), // Extract Key IDs
          keys: videoConfig.drm.clearkey.keys, // Pass Key ID-Key pairs
        },
      },
    });
  } else {
    // If the stream ID is invalid or missing, display an error or load a default stream
    alert('Invalid or missing stream ID. Please specify a valid "id" in the URL.');
  }
</script>

</body>
</html>